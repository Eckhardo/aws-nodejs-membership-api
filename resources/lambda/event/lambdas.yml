process-events:
  handler: api/event/processEvents.handler
  description: Looks for ended events and sets status to CLOSED
  events:
    - http:
        path: event/process
        method: get
        cors: true
  layers:
    - { Ref: MiddyDependenciesLambdaLayer }

  # events:
  # - schedule: rate(1 minute)
get-event:
  handler: api/event/get.getOne
  description: GET event by year and name
  events:
    - http:
        path: event/{year}/{name}
        method: get
        cors: true
  layers:
    - { Ref: MiddyDependenciesLambdaLayer }

get-events:
  handler: api/event/get.getAll
  description: GET all Events for a particular year
  events:
    - http:
        path: event/{year}
        method: get
        cors: true
  layers:
    - { Ref: MiddyDependenciesLambdaLayer }

create-event:
  handler: api/event/create.handler
  description: POST event
  events:
    - http:
        path: event
        method: post
        cors: true
  layers:
    - { Ref: MiddyDependenciesLambdaLayer }

update-event:
  handler: api/event/update.handler
  description: PUT event
  events:
    - http:
        path: event
        method: put
        cors: true
  layers:
    - { Ref: MiddyDependenciesLambdaLayer }

delete-event:
  handler: api/event/delete.handler
  description: DELETE event by year and name
  events:
    - http:
        path: event/{year}/{name}
        method: delete
        cors: true
  layers:
    - { Ref: MiddyDependenciesLambdaLayer }

